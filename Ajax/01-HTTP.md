# HTTP
### 一个完整的 HTTP 请求过程
1. 建立 TCP 连接；
2. Web 浏览器向 Web 服务器发送请求命令；
3. Web 浏览器发送请求头信息；
4. Web 服务器- 应答；
5. Web 服务器- 发送应答头信息；
6. Web 服务器- 向浏览器发送数据；
7. Web 服务器- 关闭 TCP 连接。

> 或者：

* DNS解析
* 建立TCP连接（3次握手）
* 发送HTTP请求，从服务器下载相关内容
* 浏览器构建DOM树和CSS树，然后生成渲染树。这个一个渐进式过程，引擎会力求最快将内容呈现给用户。
* 在第四步的过程中，`<script>` 的位置和加载方式会影响响应速度。
* 关闭TCP连接（4次握手）

## HTTP 请求
* HTTP 请求的方法或动作如是 GET 还是 POST 请求；

* 正在请求的 URL，总得知道请求的地址是什么吧；

* 请求头，包含一些客户端环境信息，身份验证信息等；

* 请求体，也就是请求正文，请求正文中可以包含客户端提交的查询字符串信息，表单信息等等。

### HTTP 请求方式
|  请求方式  |         用途        |                安全性             |        大小      |
| --------- | ------------------ | -------------------------------- | ---------------- |
|    GET    |   用于信息获取/查询   |  安全性低(使用url传递参数所有人可见)  | 容量低(2000个字符) |
|    POST   | 用于在服务器上新建资源 |              安全性一般            |    容量几乎无限    |
|    PUT    | 在服务器更新资源（客户端提供完整资源数据） |               |      |
|    PATCH    | 使用部分JSON数据更新资源 |               |      |
|    DELETE  |   从服务器删除资源   |                       |         |
|    HEAD   |  从服务器获取报头信息（不是资源）|  |  |

## HTTP 响应
* 一个数字和文字组成的状态码，用来显示请求是成功还是失败；

* 响应头，响应头和请求头一样包含许多有用的信息，例如服务器类型，日期时间，内容类型和长度等；

* 响应体，也就是响应正文。

### 媒体格式类型（MIME）
* application/json -- JSON 数据格式

* application/x-www-form-urlencoded -- url 参数形式

* multipart/form-data -- from 表单

* text/plain -- 纯文本的方式

``` bash
Content-Type: application/json; charset=utf-8
```

### HTTP 状态码
* 1** 信息，服务器收到请求，需要请求者继续执行操作(如 101，表示升级为 websocket 协议) ；

* 2** 成功，操作被成功接收并处理(如 206,表示部分内容，分段传输) ；

* 3** 重定向，需要进一步操作以完成请求(如 301,302 重定向；304 命中缓存) ；

* 4** 客户端错误，请求包含语法错误或无法完成请求(如 401,要求身份验证；403，服务器理解客服端需求，但是禁止访问) ；

* 5** 服务器错误，服务器在处理请求的过程中发生了错误。

常见的 HTTP 状态码

| 状态码 |	                         描述                        |        短语       |
| ----- | ---------------------------------------------------- | ---------------- |
|  200	 |  请求成功。一般用于 GET 和 POST 方法                     |  OK
|  201	 |  新建资源成功。一般用于 POST 方法                     |  Created
|  301	 |  资源移动。所请求资源移动到新的 URL，浏览器自动跳转到新的 URL | Moved Permanently
|  304	 |  未修改。所请求资源未修改读取缓存数据                      | Not Modified
|  400	 |  请求语法错误，服务器无法理解	                          | Bad Request
|  401	 |  标记客户端错误，需要客户端自查	                          | Unauthorized
|  403	 |  当客户端访问未授权的资源时，服务器应该返回403要求用户授权信息 | Forbidden
|  404	 |  未找到资源，可以设置个性”404页面”	                       | Not Found
|  415	 |  服务器媒体类型 Content-Type 和 Accept 指定错误          | Unsupported Media Type
|  500	 |  服务器内部错误	                                        | internal Server Error

### 速度限制(Rate limiting)
对于使用基本身份验证或OAuth的API请求，每小时最多可以发出5000个请求。

| 名称 |	                         描述                        |
| ----- | ----------------------------------------------------|
|  X-RateLimit-Limit	 |  每小时允许的最大请求数量。             |
|  X-RateLimit-Remaining |  当前速率限制窗口中剩余的请求数。       |
|  X-RateLimit-Reset	 |  当前速率限制窗口以UTC历元秒为单位重置的时间。|