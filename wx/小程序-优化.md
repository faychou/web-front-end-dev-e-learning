# 优化

### 控制包的大小
* 压缩代码，清理无用的代码
* 图片放在cdn
* 采用分包策略
  * 分包预加载
  * 独立分包

### 后台 JS
在 web 的环境中，当我们跳转到其他页面，之前页面的 js 环境会被自动销毁，定时器什么都被销毁掉了，因此我们不需要关心之前的页面。

但是在小程序中，每个页面都拥有自己的 webview(渲染层)， 但是却共享同一个 js 运行环境。也就是说，当从 A 页面跳到了 B 页面，A 页面的定时器等 js 操作仍在进行，并且不会被销毁，所以会抢占 B 页面的资源，因此我们必须手动的“清理”掉这样的代码。

### onPageScroll 事件
pageScroll 事件，也是一次通讯，是 webview 层向 js 逻辑层的通讯，这次通讯也是开销较大。

* 只在必要的时候监听 onPageScroll 事件；
* 避免在 onPageScroll 事件中执行较复杂的逻辑；
* 避免在 onPageScroll 事件中频繁的调用 setData；
* 避免频繁的查询节点。